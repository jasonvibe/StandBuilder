# 项目现状分析

## 已实现功能
1. **前端SPA框架**：React 19 + TypeScript + Vite + Tailwind CSS
2. **核心页面**：
   - 首页：体系数据库浏览、搜索、客户过滤
   - 预览：体系详情查看、单文件下载
   - 生成配置：行业、项目类型、模块选择
   - 结果页：体系文件生成、打包下载
3. **数据处理**：
   - JSON格式知识库加载
   - 基于行业/项目类型的内容过滤
   - Excel导出功能
4. **技术栈**：符合PRD推荐，包含SheetJS用于Excel处理

## 与PRD的差距
1. **知识库结构**：
   - 当前使用JSON文件，未实现PRD要求的Excel标准资产结构
   - 缺少standards_master.xlsx、rules_mapping.xlsx、semantic_descriptions.md
2. **规则引擎**：
   - 当前仅实现简单的模糊匹配
   - 未实现PRD要求的显式规则映射
3. **AI功能**：
   - 仅在界面上有开关，未实现AI兜底逻辑
4. **本地业务引擎**：
   - 缺少完整的loader、ruleEngine、aiAdvisor、merger、exporter模块

# 完善计划

## 阶段一：知识库结构完善
1. **实现Excel导入功能**：
   - 支持standards_master.xlsx格式解析
   - 支持rules_mapping.xlsx格式解析
   - 支持semantic_descriptions.md格式解析
2. **建立知识库转换工具**：
   - 将现有Excel标准资产转换为JSON格式
   - 生成符合PRD要求的知识库结构
3. **完善知识库管理界面**：
   - 支持知识库版本管理
   - 支持知识库更新和同步

## 阶段二：规则引擎实现
1. **实现规则匹配逻辑**：
   - 基于rules_mapping.xlsx的显式规则匹配
   - 规则优先级高于AI
   - 支持复杂的规则组合
2. **优化内容过滤算法**：
   - 实现更精确的行业/项目类型匹配
   - 支持多维度过滤条件
3. **添加规则调试功能**：
   - 规则匹配结果可视化
   - 规则执行日志

## 阶段三：AI功能实现
1. **集成AI模型**：
   - 支持本地LLM或API调用（配置开关）
   - 实现semantic_descriptions.md的语义理解
2. **实现AI兜底逻辑**：
   - 当规则匹配结果不足时触发AI推荐
   - 显式标记AI推荐结果
   - 等待人工确认机制
3. **优化AI提示词**：
   - 基于项目特征和已选标准生成提示词
   - 提高AI推荐的准确性

## 阶段四：导出功能优化
1. **支持多种导出格式**：
   - Excel（主）
   - JSON（次）
   - 其他格式（如CSV）
2. **优化导出内容**：
   - 保留原始标准的完整性
   - 添加导出元数据（版本、时间、规则）
3. **实现批量导出**：
   - 支持按模块批量导出
   - 支持自定义导出范围

## 阶段五：用户体验优化
1. **完善界面交互**：
   - 添加加载状态和错误处理
   - 优化表单验证和提示
   - 实现响应式设计
2. **添加使用指南**：
   - 知识库结构说明
   - 规则配置指南
   - AI功能使用说明
3. **性能优化**：
   - 知识库加载优化
   - 导出过程优化
   - 缓存策略优化

# 技术实现要点

## 核心模块设计
1. **本地业务引擎层**：
   - `loader.ts`：Excel/JSON/MD文件解析
   - `ruleEngine.ts`：规则匹配逻辑
   - `aiAdvisor.ts`：AI推荐逻辑
   - `merger.ts`：结果合并和去重
   - `exporter.ts`：多格式导出

2. **数据结构设计**：
   - 标准项数据结构：符合PRD的standards_master.xlsx格式
   - 规则映射数据结构：符合PRD的rules_mapping.xlsx格式
   - 语义描述数据结构：支持AI理解的格式

3. **AI集成方案**：
   - 支持OpenAI API调用
   - 支持本地LLM（如llama.cpp）
   - 可配置的AI开关和参数

## 实现路径
1. **短期**：完善知识库结构，实现基本规则引擎
2. **中期**：实现AI功能，优化导出功能
3. **长期**：用户体验优化，性能优化

# 预期成果

- 符合PRD要求的完整本地初始化知识库结构
- 强大的规则引擎，支持复杂的标准匹配
- 智能的AI兜底功能，提供精准的标准推荐
- 专业的导出功能，支持多种格式和自定义选项
- 优秀的用户体验，简洁直观的操作界面

通过以上完善，StandBuilder将成为一个功能强大、可靠性高的项目初始化生成工具，为新客户项目提供标准化的体系清单，提高项目交付效率和质量。